<%# This should probably all be in a render shared, rather than building the HTML from here %>
<% if defined? @cart_error then %>
	alert ('<%= @cart_error.to_s %>');
<% end %>
cart_html = "";
<% @cart.line_items.each do |item| %>
	cart_html += '<%= form_tag("/carts/#{@cart.id}/remove_item", {:remote => true}) { %><%= label_tag 'video_name', item.video.name %> - <%= label_tag 'quality', item.quality %> - <%= label_tag 'price', '$' + item.get_price().to_s %> - <%= hidden_field_tag 'item_id', item.id %><%= submit_tag "Remove Item from Cart" %><% } %>';
	<%# Rails.logger.info ("cart html is" + html_form) %>
<% end %>
cart_html += '<br /><%="Total: $#{@cart.total_price}"%>';
<% if !(defined? @show_clear) || @show_clear then %>
	cart_html += '<%= form_tag("/carts/#{@cart.id}/clear_items", {:remote => true}) { submit_tag "Clear Cart", :id => "clear_cart" } %>';
<% end %>

$('#cart_box').html(cart_html);